/**
 * Sample release data for development and testing
 * This will be replaced by actual markdown files in production
 * 
 * Note: MediaInfo summary is auto-generated from raw content at runtime
 */
import type { Release } from './schema';

export const sampleReleases: Release[] = [
    // New release entries will be added here by the CLI
    {
        slug: '9gbs4sb6',
        title: 'Takopi\'s Original Sin',
        title_en: 'Takopi\'s Original Sin',
        title_zh: '章鱼哔的原罪',
        date: '2026-01-19T07:32:38.564Z',
        tmdb_id: 284445,
        media_type: 'tv',
        special_type: 'ona',
        season: 1,
        is_complete: true,
        year: 2025,
        poster: '/posters/9gbs4sb6.avif',
        torrents: [
            {
                name: '[KWTR] Takopis Original Sin S01 (BD 1080p FLAC x265)',
                display_name: 'KWTR BD 1080p FLAC x265',
                files: [{ name: 'Takopis.Original.Sin.S01E01.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', size: 6557114049 }, { name: 'Takopis.Original.Sin.S01E02.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', size: 4011836976 }, { name: 'Takopis.Original.Sin.S01E03.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', size: 4604148842 }, { name: 'Takopis.Original.Sin.S01E04.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', size: 4438690471 }, { name: 'Takopis.Original.Sin.S01E05.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', size: 4351425740 }, { name: 'Takopis.Original.Sin.S01E06.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', size: 4294099283 }],
                mediainfo: [
                    { filename: 'Takopis.Original.Sin.S01E01.1080p.BluRay.FLAC2.0.x265-Kawatare.mkv', raw_hash: '67p78b9x' },
                ]
            },
            {
                name: '[TSKR] Takopis Original Sin S01 (BD 1080p Opus AV1)',
                display_name: 'TSKR BD 1080p Opus AV1',
                files: [{ name: 'Takopis.Original.Sin.S01E01.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', size: 372748298 }, { name: 'Takopis.Original.Sin.S01E02.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', size: 215319811 }, { name: 'Takopis.Original.Sin.S01E03.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', size: 259483258 }, { name: 'Takopis.Original.Sin.S01E04.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', size: 251580495 }, { name: 'Takopis.Original.Sin.S01E05.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', size: 251456135 }, { name: 'Takopis.Original.Sin.S01E06.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', size: 216195669 }],
                mediainfo: [
                    { filename: 'Takopis.Original.Sin.S01E01.1080p.BluRay.Opus2.0.AV1-Tasokare.mkv', raw_hash: '47m6ij5j' },
                ]
            },
        ],
        specs: [
            {
                title: 'Info',
                content: `Source..........: Takopis.Original.Sin.1080p.BluRay.REMUX.AVC.FLAC.2.0-yolerejiju
                  (Happinet | JPN Blu-ray | Bikko@U2)
Filtering.......: Denoising, Dehaloing, Debanding, Graining
Subtitles.......: Chinese subtitles from SweetSub, Studio GreenTea and Billion Meta Lab
                  English subtitle from GJM
                  Japanese subtitle from Amazon
                  Catalan subtitle from AMF
                  Latin America Spanish from Kashikoi
                  Other subtitles from Crunchyroll and Amazon
Comparisons.....: <a href="https://slow.pics/c/82rQCk2M" target="_blank" rel="noopener" class="spec-link">Source | Kawatare | Tasokare</a>`
            },
            {
                title: 'x265 log',
                content: `<div class="inner-quote"><div class="inner-quote-title">E01</div><div class="inner-quote-content">x265 [INFO]: frame I:    550, Avg QP: 9.39  kb/s: 55672.44
x265 [INFO]: frame P:   9510, Avg QP:10.68  kb/s: 39132.34
x265 [INFO]: frame B:  44324, Avg QP:11.91  kb/s: 18344.23
x265 [INFO]: Weighted P-Frames: Y:1.7% UV:1.2%
x265 [INFO]: Weighted B-Frames: Y:1.2% UV:0.8%</div></div>
<div class="inner-quote"><div class="inner-quote-title">E02</div><div class="inner-quote-content">x265 [INFO]: frame I:    357, Avg QP: 9.23  kb/s: 52661.43
x265 [INFO]: frame P:   5358, Avg QP:10.47  kb/s: 39277.54
x265 [INFO]: frame B:  25365, Avg QP:11.70  kb/s: 20266.14
x265 [INFO]: Weighted P-Frames: Y:3.5% UV:2.6%
x265 [INFO]: Weighted B-Frames: Y:2.2% UV:1.7%</div></div>
<div class="inner-quote"><div class="inner-quote-title">E03</div><div class="inner-quote-content">x265 [INFO]: frame I:    414, Avg QP: 9.43  kb/s: 53737.40
x265 [INFO]: frame P:   6650, Avg QP:10.68  kb/s: 38736.21
x265 [INFO]: frame B:  30928, Avg QP:11.89  kb/s: 18488.61
x265 [INFO]: Weighted P-Frames: Y:1.8% UV:1.4%
x265 [INFO]: Weighted B-Frames: Y:1.1% UV:0.9%</div></div>
<div class="inner-quote"><div class="inner-quote-title">E04</div><div class="inner-quote-content">x265 [INFO]: frame I:    501, Avg QP: 9.15  kb/s: 49757.15
x265 [INFO]: frame P:   6073, Avg QP:10.47  kb/s: 38616.17
x265 [INFO]: frame B:  27410, Avg QP:11.62  kb/s: 20579.64
x265 [INFO]: Weighted P-Frames: Y:2.9% UV:1.9%
x265 [INFO]: Weighted B-Frames: Y:1.5% UV:1.1%</div></div>
<div class="inner-quote"><div class="inner-quote-title">E05</div><div class="inner-quote-content">x265 [INFO]: frame I:    456, Avg QP: 9.23  kb/s: 49337.95
x265 [INFO]: frame P:   6434, Avg QP:10.49  kb/s: 37084.38
x265 [INFO]: frame B:  28414, Avg QP:11.71  kb/s: 19203.30
x265 [INFO]: Weighted P-Frames: Y:2.7% UV:1.8%
x265 [INFO]: Weighted B-Frames: Y:2.6% UV:1.8%</div></div>
<div class="inner-quote"><div class="inner-quote-title">E06</div><div class="inner-quote-content">x265 [INFO]: frame I:    403, Avg QP: 9.01  kb/s: 52094.86
x265 [INFO]: frame P:   6263, Avg QP:10.38  kb/s: 38528.71
x265 [INFO]: frame B:  25422, Avg QP:11.51  kb/s: 20984.29
x265 [INFO]: Weighted P-Frames: Y:2.6% UV:2.1%
x265 [INFO]: Weighted B-Frames: Y:1.7% UV:1.4%</div></div>`
            },
            {
                title: 'AV1 Info',
                content: `Encoder.........: SVT-AV1 v3.1.2-Essential-PMod via Auto-Boost-Essential
Grain...........: ISO 500 via Grav1synth`
            },
        ],
        links: {
            tmdb: 'https://www.themoviedb.org/tv/284445',
            imdb: 'https://www.imdb.com/title/tt36988358/',
            douban: 'https://movie.douban.com/subject/37105295/',
        }
    },
];

/**
 * Get all sample releases sorted by date (newest first)
 */
export function getAllReleases(): Release[] {
    return [...sampleReleases].sort(
        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime(),
    );
}

/**
 * Search releases by title (en/zh)
 */
export function searchReleases(query: string): Release[] {
    const q = query.toLowerCase();
    return getAllReleases().filter(
        (r) =>
            r.title.toLowerCase().includes(q) ||
            (r.title_en?.toLowerCase().includes(q) ?? false) ||
            (r.title_zh?.toLowerCase().includes(q) ?? false),
    );
}

/**
 * Get release by slug
 */
export function getReleaseBySlug(slug: string): Release | undefined {
    return sampleReleases.find((r) => r.slug === slug);
}
